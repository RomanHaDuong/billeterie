<div class="container py-5">
  <%# Header Section %>
  <div class="row mb-5">
    <div class="col-lg-4">
      <div class="position-relative mb-4">
        <% if @fournisseur.user&.image&.attached? %>
          <%= image_tag @fournisseur.user.image, class: "rounded-3 shadow-sm w-100", style: "object-fit: contain;" %>
        <% elsif @fournisseur.image.attached? %>
          <%= image_tag @fournisseur.image, class: "rounded-3 shadow-sm w-100", style: "object-fit: contain;" %>
        <% else %>
          <%= image_tag "placeholder_person.png", class: "rounded-3 shadow-sm w-100", style: "object-fit: contain;" %>
        <% end %>
      </div>

      <%# Quick Stats %>
      <div class="card border-0 shadow-sm mb-3">
        <div class="card-body text-center">
          <h3 class="mb-1 fw-bold"><%= @fournisseur.offres.count %></h3>
          <p class="text-muted mb-0"><%= @fournisseur.offres.count > 1 ? 'Animations' : 'Animation' %></p>
        </div>
      </div>

      <%# Contact/Social %>
      <div class="d-flex flex-column gap-2">
        <% if @fournisseur.linkedin.present? %>
          <% linkedin_url = @fournisseur.linkedin.start_with?('http') ? @fournisseur.linkedin : "https://#{@fournisseur.linkedin}" %>
          <a href="<%= linkedin_url %>" target="_blank" class="btn btn-outline-primary">
            <i class="bi bi-linkedin me-2"></i>Linkedin
          </a>
        <% end %>

        <% if @fournisseur.instagram.present? %>
          <% instagram_url = @fournisseur.instagram.start_with?('http') ? @fournisseur.instagram : "https://#{@fournisseur.instagram}" %>
          <a href="<%= instagram_url %>" target="_blank" class="btn btn-outline-dark">
            <i class="bi bi-instagram me-2"></i>Instagram
          </a>
        <% end %>

        <% if @fournisseur.offinity.present? %>
          <% offinity_url = @fournisseur.offinity.start_with?('http') ? @fournisseur.offinity : "https://#{@fournisseur.offinity}" %>
          <a href="<%= offinity_url %>" target="_blank" class="btn btn-outline-dark">
            <i class="bi bi-link-45deg me-2"></i>Offinity
          </a>
        <% end %>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <h1 class="fw-bold mb-0"><%= @fournisseur.name %></h1>
        <% if current_user&.admin? || (current_user && current_user.fournisseur == @fournisseur) %>
          <%= link_to edit_fournisseur_path(@fournisseur), class: "btn btn-outline-primary" do %>
            <i class="fa-solid fa-edit me-2"></i>Modifier
          <% end %>
        <% end %>
      </div>

      <%# Bio %>
      <div class="card border-0 shadow-sm p-4 mb-4">
        <h5 class="fw-bold mb-3">Ã€ propos</h5>
        <div class="mb-0"><%= simple_format(@fournisseur.bio) %></div>
      </div>

      <%# Animations Section %>
      <h3 class="fw-bold mb-3">Animations (<%= @all_offres.count %>)</h3>
      <div class="row g-4">
        <% @all_offres.each do |offre| %>
          <%= render partial: 'shared/offre', locals: { offre: offre } %>
        <% end %>
      </div>
    </div>
  </div>
</div>
